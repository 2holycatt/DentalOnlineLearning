<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>เพิ่มคำถามท้ายบท</title>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"> -->
  <link rel="stylesheet" href="/css/getMoreAddContent.css">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <link rel="stylesheet" href="/css/animation.css">
  <link rel="stylesheet" href="/css/sweet.css">

  <%- include("./partials/header.ejs")%>
  <style>
    .choose-layout {
      border: 3px solid #0062cb;
      height: 250px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 0.5em;
    }

    .choose-layout:hover>p {
      font-size: xx-large !important;
      transition: 0.3s;
    }

    .choose-layout>p {
      transition-duration: 0.3s !important;
    }

    .drop-zone {
      background-color: #F0F0F0;
      border: 1px dashed #CCC;
      padding: 10px;
      text-align: center;
      vertical-align: middle;
    }

    * {

      word-wrap: break-word !important;

    }

    .allContent {
      height: fit-content !important;
    }

    .oldContent {
      height: fit-content !important;
    }

    .hide-layout-11,
    .layout-2,
    .hide-layout-3,
    .hide-layout-4 {
      display: none;
      opacity: 1;
      height: fit-content !important;
      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important;
      transition: display 0.5s ease !important;
      /* transition: all 0.8s cubic-bezier(0.15, 0.83, 0.66, 1); */
      margin-bottom: 2em !important;

    }

    .cancelIcon,
    .cancelIcon2,
    .cancelIcon3 {
      font-size: 2em !important;
      border: none !important;
      background-color: white !important;
      margin-bottom: 0em !important;
    }

    .addLayout01Form {
      padding-bottom: 1em !important;
    }

    .show-layout-2 {
      display: block;
      opacity: 1;
      /* สิ้นสุดที่ความทึบ 1 */
      transition: opacity 0.5s ease;
      /* กำหนดการเปลี่ยนแปลงที่ต้องการ */
      height: fit-content !important;

    }

    .showoldlayoutSpan,
    .hidoldlayoutSpan {
      font-size: smaller !important;
    }

    .showAndHideBtn {
      height: fit-content !important;
    }


    .hideOldContentDiv,
    .showOldContentDiv {
      display: flex;
      justify-content: start;
      height: fit-content !important;
    }

    .hideOldContentDiv,
    .hidedContent {
      display: none;
    }

    .showOldContent {
      display: block;
      opacity: 1;
      /* สิ้นสุดที่ความทึบ 1 */
      transition: opacity 0.5s ease;
      /* กำหนดการเปลี่ยนแปลงที่ต้องการ */
      height: fit-content !important;

    }

    .hide-layout-2 {
      height: fit-content !important;
    }

    .teaxtAreaLayout4_1 {
      text-indent: 1em !important;
      padding-top: 1em !important;
      width: 100% !important;
      border: none !important;

    }

    .addAndMinus {
      border: none !important;
      margin-top: 0.5em !important;
      margin-right: 0.5em !important;
      font-size: x-large !important;
      transition-duration: 0.3s;

    }

    .addAnd:hover .bi-plus-circle {
      display: none !important;
      transition: 0.3s;
    }

    .addAnd:hover .bi-plus-circle-fill {
      display: inline !important;
      transition: 0.3s;

    }

    .minusAnd:hover .bi-dash-circle {
      display: none !important;
      transition: 0.3s;

    }

    .minusAnd:hover .bi-dash-circle-fill {
      display: inline !important;
      transition: 0.3s;

    }


    .setBorder {
      border: 0.125px solid black;
      border-radius: 0.5em !important;
      box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px !important;
      padding: 0.10em !important;
      text-indent: 0.25em !important;
      font-size: medium !important;
      margin-bottom: 0.5em !important;
    }

    .header-1::after {
      content: "";
      display: block !important;
      background-color: #007bff !important;
      margin: 0.5em !important;
      width: 5em;
      height: 5px;
    }

    .discription-layout {
      color: #747474 !important;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    .example-pic1 {
      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important;
      border-radius: 0.5em;
    }

    .header-managebar {
      border-left: 0.25em solid #387bef;
      padding-left: 0.50em !important;
      margin-bottom: 0.5em !important;

    }

    .main-content {
      height: fit-content !important;
    }

    input[type=file] {
      border: 1px solid #ced4da;
      border-radius: 0.5em;

    }

    input[type=file]::file-selector-button {
      margin-right: 1em;
      border-top: none;
      border-left: none;
      border-bottom: none;
      border-right: 1px solid #ced4da;
      background: white;
      padding: 0.5em 1em;
      border-radius: 0.5em;
      color: #084cdf;
      cursor: pointer;
      transition: background .2s ease-in-out;

    }

    input[type=file]::file-selector-button:hover {
      background: #0d45a5;
      color: white;
    }

    .img-input::placeholder {
      color: #ced4da !important;
    }

    .none-border {
      border-left: none !important;
      border-top: none !important;
      border-right: none !important;
      border-radius: 0 !important;

    }

    .set-small-font {
      font-size: smaller;
      font-style: italic;
      margin-bottom: 0.5em !important;
    }

    .lesson-bar {
      border-left: 0.25em solid #007bff !important;
      padding-left: 0.5em !important;
      margin-right: 0.5em !important;

    }

    .return-a {
      transition-duration: 0.3s;
    }

    .return-a:hover {
      transition: 0.3s;
      color: #0062cb !important;
    }

    .set-border-title {
      border: 0.125em solid #007bff;
      border-radius: 0.5em;
    }

    .set-border-title-2 {
      border: 0.125em solid #007bff;
      border-radius: 0.5em;


    }

    .ImageScript {
      border-top: 0.125em solid #007bff;
      border-radius: 0.5em;
      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important;
      height: max-content;

    }

    .layout-1-typing {
      /* box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important; */
      box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
      border-radius: 0.25em;
      border-top: 0.125em solid #007bff;
      border-bottom-left-radius: 0.5em;
      border-bottom-right-radius: 0.5em;
      max-width: 28em !important;
      /* width: auto; */
      padding-top: 0.5em !important;
      height: 18.75em;
      /* หรือค่าสูงสุดที่คุณต้องการ */
      /* เพื่อให้มีการเลื่อนเนื้อหาเมื่อเกินขนาดที่กำหนด */
      background-color: white;
      margin-bottom: 1em !important;
      overflow-y: auto !important;

    }

    .layout-1-topic-p,
    .layout-1-MainDescription-p {
      border-bottom: 0.5px solid #ced4daac;
      padding-top: 0.5em !important;
    }

    .layout-1-MainDescription-p2 {
      border-bottom: 0.5px solid #ced4daac;
      /* padding-top: 0.5em !important; */
      margin: 0.5em 0.5em !important;
      font-size: small !important;
    }

    .layout-1-MainDescription-p3 {

      border-bottom: 0.5px solid #ced4daac;
      /* padding-top: 0.5em !important; */
      margin: 1em 1.5em !important;
      font-size: small !important;

    }

    .layout-1-MainDescription-p {
      margin-left: 2em !important;
      margin-right: 1em !important;
    }

    .content-1 {
      border-top: 0.125em solid #007bff;
      border-radius: 0.5em;
      margin-top: 1em !important;
    }

    .set-grid {
      display: grid;
      grid-template-columns: 0.5fr 1fr;

    }

    #outputParagraph2,
    #outputParagraph3,
    #outputParagraph6 {
      font-size: smaller !important;
    }

    #outputParagraph4 {
      font-size: x-small;
    }

    #outputParagraph3 {
      max-width: 28em;

    }

    .img222 {
      border-radius: 0.5em;
      width: 80%;
      /* justify-content: center; */
    }

    .img223 {
      border-radius: 0.25em;
      width: 100%;
      /* justify-content: center; */
    }

    .border-div {
      border: 1px solid #ced4da;
      width: 80%;
    }

    .exampleLayout-2 {
      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important;
      border-radius: 0.25em !important;
      height: max-content;
      margin-top: 1em !important;
      padding-bottom: 1em !important;


    }

    .exampleLayout {
      border-bottom: 0.125em solid #007bff !important;
      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important;
      border-radius: 0.25em !important;
      padding-bottom: 1em !important;

    }


    /* .exampleLayout2-2 {

    } */

    .layout-2-typing {
      /* box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important; */
      box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
      border-radius: 0.25em;
      border-top: 0.125em solid #007bff;


      border-bottom-left-radius: 0.5em;
      border-bottom-right-radius: 0.5em;
      max-width: 28em !important;
      /* width: auto; */
      padding-top: 0.5em !important;
      padding-bottom: 1em !important;

      height: 14em;
      /* หรือค่าสูงสุดที่คุณต้องการ */
      /* เพื่อให้มีการเลื่อนเนื้อหาเมื่อเกินขนาดที่กำหนด */
      background-color: white;
      overflow-y: auto !important;

    }

    .layout-3-typing {
      /* box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px !important; */
      box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
      border-radius: 0.25em;
      border-top: 0.125em solid #007bff;
      border-bottom-left-radius: 0.5em;
      border-bottom-right-radius: 0.5em;
      max-width: 28em !important;
      /* width: auto; */
      padding-top: 0.5em !important;
      padding-bottom: 1em !important;
      height: fit-content;
      /* หรือค่าสูงสุดที่คุณต้องการ */
      /* เพื่อให้มีการเลื่อนเนื้อหาเมื่อเกินขนาดที่กำหนด */
      background-color: white;

    }

    video {
      border-radius: 0.5em;
      box-shadow: rgba(67, 71, 85, 0.27) 0px 0px 0.25em, rgba(90, 125, 188, 0.05) 0px 0.25em 1em;

    }

    .template-header,
    .custom-header,
    .template-layout,
    .custom-layout {
      display: none;
    }
  </style>


</head>

<body>
  <div id="blur-container">
    <%- include("./partials/nav.ejs")%>

    <div class="main-content bg-white d-flex w-100 h-auto">
      <%- include("./partials/lessonsList.ejs")%>
      <div class=" row allContent bg-white" style="width: 80%;">
        <div class="col-12 oldContent aside-right bg-white px-4 py-4" style="width: 100% !important;">
          <div class="manange-bar px-4 py-3 bg-white w-100">
            <div class="d-flex">
              <div class="d-flex w-75" style="align-items: center; grid-template-columns: 0.5fr 1.5fr;">
                <p class="fw-bold w-auto fs-6 lesson-bar">เพิ่มคำถามท้ายบท</p>
                <p class="fw-normal w-auto fs-6" style="margin-left: 0.5em !important;">บทเรียน:
                  <span class="fw-normal fs-6 text-primary" style="margin-right: 1em !important;"><%=lesson.LessonName%></span>
                </p>
                <a href="/adminIndex/eachLessons?lessonId=<%=lesson._id%>" class="edit-a text-dark px-2" style="border-left: 1px solid #ced4daa0 ;margin:0em 1em !important; font-size: small;">แก้ไขชื่อและรูปปก<i class="bi bi-pencil mx-2"></i>
                </a>
              </div>
              <div class="d-flex w-25 justify-content-end" style="align-items: center; margin-top: 0.5 !important;">
                <a href="/adminIndex/eachLessons?lessonId=<%=lesson._id%>" class="return-a text-primary">กลับสู่เนื้อหา<i class="bi bi-arrow-return-left mx-2"></i>
                </a>
              </div>
            </div>
            <!-- <div class="d-flex">
              <div class="d-flex w-50">
                <button disabled href="#" class=" add-button btn btn-primary my-2 p-2" style="height: fit-content !important;">
                  เพิ่มเนื้อหา<i class="bi bi-plus-circle-fill mx-2"></i>
                </button>
                <a href="/adminIndex/editLesson?lesson=<%=lesson._id%>" class="btn add-button btn-warning my-2 p-2 mx-2" style="height: fit-content !important;">
                  แก้ไขเนื้อหาภายในบทเรียน<i class="bi bi-pencil-square mx-2"></i>
                </a>
              </div>
              <div class="d-flex w-50 justify-content-end">
                <a href="/adminIndex/deleteLesson?lessonId=<%=lesson._id%>" class="btn add-button btn-danger my-2 p-2 mx-2" style="height: fit-content !important;">
                  ลบบทเรียน: <span class="text-light"><%=lesson.LessonName%></span><i class="bi bi-eraser-fill mx-2"></i>
                </a>
              </div>
            </div> -->

          </div>
          <div class="lesson-content p-4 bg-white w-100 h-auto my-2">
            <div class="row d-flex align-items-center">
              <div class="col">
                <p class="fw-bold">กรอกคำถามท้ายบท</p>
              </div>
              <div class="col d-flex justify-content-end">
                <a href="#" onclick="resetQuestions()" class="reset text-dark">
                  <i class="bi bi-arrow-clockwise fs-5"></i>
                </a>
              </div>
            </div>
            <form action="/adminIndex/addEndQuestionChapter" method="post">
              <input type="text" class="d-none" name="lessonId" value="<%=lesson._id%>">
              <div class="questionForm">
                <div class="mt-1">
                  <div class="mb-1 row">
                    <div class="col-12 d-flex align-items-center">
                      <i class="bi text-primary bi-dot fs-2"></i>
                      <textarea class="form-control p-2 question1" name="question1" rows="1"></textarea>
                    </div>
                  </div>
                </div>
              </div>
              <div class="d-flex justify-content-end mt-2">
                <button onclick="addQuestion()" class="add-button btn btn-primary p-2" type="button" style="height: fit-content !important;">
                  เพิ่มคำถาม<i class="bi bi-plus-circle-fill mx-2"></i>
                </button>
                <button type="submit" class="btn add-button btn-success p-2 mx-2" style="height: fit-content !important;">
                  บันทึก<i class="bi bi-pencil-square mx-2"></i>
                </button>
                <!-- <a href="/adminIndex/editLesson?lesson=<%=lesson._id%>" class="btn add-button btn-success p-2 mx-2" style="height: fit-content !important;">
                  บันทึก<i class="bi bi-pencil-square mx-2"></i>
                </a> -->
              </div>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
  <%- include("./partials/footer.ejs")%>
  <script src="/js/two-way.js"></script>
  <script>
    function addQuestion() {
      // หา form ที่จะเพิ่มข้อมูลใหม่
      const form = document.querySelector('.questionForm');

      // นับจำนวนคำถามที่มีอยู่แล้ว
      const questionCount = form.querySelectorAll('textarea').length + 1; // เริ่มต้นที่ 2 เนื่องจากมี default อยู่แล้ว
 
      const defaultQuestionHTML = `
      <div class="mt-1 question-block">
        <div class="mb-1 row">
            <div class="col-12 d-flex align-items-center">
                <i class="bi text-primary bi-dot fs-2"></i>
                <textarea class="form-control p-2 question${questionCount}" name="question${questionCount}" rows="1"></textarea>
            </div>
        </div>
      </div>
    `;

    form.insertAdjacentHTML('beforeend', defaultQuestionHTML);

    }

    function resetQuestions() {
      // หา form ที่มีคำถามทั้งหมด
      const form = document.querySelector('.questionForm');

      // ลบคำถามทั้งหมด
      form.innerHTML = '';

      // สร้างคำถาม question1 ที่เป็นค่าเริ่มต้นใหม่
      const defaultQuestionHTML = `
      <div class="mt-1 question-block">
        <div class="mb-1 row">
                    <div class="col-12 d-flex align-items-center">
                      <i class="bi text-primary bi-dot fs-2"></i>
                      <textarea class="form-control p-2 question1" name="question1" rows="1"></textarea>
                    </div>
                  </div>
      </div>
    `;

      // เพิ่มคำถาม question1 ลงใน form
      form.insertAdjacentHTML('beforeend', defaultQuestionHTML);
    }
  </script>
  <!-- <script src="http://localhost:9000/javascripts/bundle.js"></script>
    <script src="/javascripts/bundle.js"></script> -->

</body>

</html>